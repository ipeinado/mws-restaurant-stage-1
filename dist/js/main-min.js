let restaurants,neighborhoods,cuisines;var map,markers=[];document.addEventListener("DOMContentLoaded",e=>{fetchNeighborhoods(),fetchCuisines()}),fetchNeighborhoods=(()=>{DBHelper.fetchNeighborhoods((e,t)=>{e?console.error(e):(self.neighborhoods=t,fillNeighborhoodsHTML())})}),fillNeighborhoodsHTML=((e=self.neighborhoods)=>{const t=document.getElementById("neighborhoods-select");e.forEach(e=>{const s=document.createElement("option");s.innerHTML=e,s.value=e,t.append(s)})}),fetchCuisines=(()=>{DBHelper.fetchCuisines((e,t)=>{e?console.error(e):(self.cuisines=t,fillCuisinesHTML())})}),fillCuisinesHTML=((e=self.cuisines)=>{const t=document.getElementById("cuisines-select");e.forEach(e=>{const s=document.createElement("option");s.innerHTML=e,s.value=e,t.append(s)})}),window.initMap=(()=>{self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),updateRestaurants()}),updateRestaurants=(()=>{const e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),s=e.selectedIndex,n=t.selectedIndex,r=e[s].value,a=t[n].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(r,a,(e,t)=>{e?console.error(e):(resetRestaurants(t),fillRestaurantsHTML())})}),resetRestaurants=(e=>{self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers.forEach(e=>e.setMap(null)),self.markers=[],self.restaurants=e}),fillRestaurantsHTML=((e=self.restaurants)=>{const t=document.getElementById("restaurants-list");e.forEach(e=>{t.append(createRestaurantHTML(e))}),addMarkersToMap()}),createRestaurantHTML=(e=>{const t=document.createElement("li");document.createElement("img").className="restaurant-img";const s=DBHelper.imageUrlForRestaurant(e),n=document.createElement("picture"),r="Image of "+e.name+" Restaurant",a=document.createElement("source"),o=s+"-small.webp 1x, "+s+"-medium.webp 2x";a.setAttribute("type","image/webp"),a.setAttribute("srcset",o),a.setAttribute("alt",r),n.append(a);const l=document.createElement("source"),c=s+"-small.jpg 1x, "+s+"-medium.jpg 2x";l.setAttribute("type","image/jpeg"),l.setAttribute("srcset",c),l.setAttribute("alt",r),n.append(l);const i=document.createElement("img");i.setAttribute("src",s+"-small.jpg"),i.setAttribute("alt",r),n.append(i),t.append(n);const u=document.createElement("h3");u.innerHTML=e.name,t.append(u);const d=document.createElement("p");d.innerHTML=e.neighborhood,t.append(d);const m=document.createElement("p");m.innerHTML=e.address,t.append(m);const p=document.createElement("a");return p.innerHTML="View Details",p.setAttribute("aria-label","View Details about "+e.name),p.href=DBHelper.urlForRestaurant(e),t.append(p),t}),addMarkersToMap=((e=self.restaurants)=>{e.forEach(e=>{const t=DBHelper.mapMarkerForRestaurant(e,self.map);google.maps.event.addListener(t,"click",()=>{window.location.href=t.url}),self.markers.push(t)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVzdGF1cmFudHMiLCJuZWlnaGJvcmhvb2RzIiwiY3Vpc2luZXMiLCJtYXAiLCJtYXJrZXJzIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJmZXRjaE5laWdoYm9yaG9vZHMiLCJmZXRjaEN1aXNpbmVzIiwiREJIZWxwZXIiLCJlcnJvciIsImNvbnNvbGUiLCJzZWxmIiwiZmlsbE5laWdoYm9yaG9vZHNIVE1MIiwic2VsZWN0IiwiZ2V0RWxlbWVudEJ5SWQiLCJmb3JFYWNoIiwibmVpZ2hib3Job29kIiwib3B0aW9uIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsInZhbHVlIiwiYXBwZW5kIiwiZmlsbEN1aXNpbmVzSFRNTCIsImN1aXNpbmUiLCJ3aW5kb3ciLCJpbml0TWFwIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsInpvb20iLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJzY3JvbGx3aGVlbCIsInVwZGF0ZVJlc3RhdXJhbnRzIiwiY1NlbGVjdCIsIm5TZWxlY3QiLCJjSW5kZXgiLCJzZWxlY3RlZEluZGV4IiwibkluZGV4IiwiZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kIiwicmVzZXRSZXN0YXVyYW50cyIsImZpbGxSZXN0YXVyYW50c0hUTUwiLCJtIiwic2V0TWFwIiwidWwiLCJyZXN0YXVyYW50IiwiY3JlYXRlUmVzdGF1cmFudEhUTUwiLCJhZGRNYXJrZXJzVG9NYXAiLCJsaSIsImNsYXNzTmFtZSIsImltZ19uYW1lIiwiaW1hZ2VVcmxGb3JSZXN0YXVyYW50IiwicGljdHVyZSIsImFsdF90ZXh0IiwibmFtZSIsInNvdXJjZV93ZWJwIiwic3Jjc2V0X3dlYnAiLCJzZXRBdHRyaWJ1dGUiLCJzb3VyY2VfanBlZyIsInNyY3NldF9qcGVnIiwiaW1nIiwiYWRkcmVzcyIsIm1vcmUiLCJocmVmIiwidXJsRm9yUmVzdGF1cmFudCIsIm1hcmtlciIsIm1hcE1hcmtl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SixHQUVoQ0QsRUFBUWhDLE9BQU9zQyxHQUVmLE1BQU1FLEVBQU0xRCxTQUFTZSxjQUFjLE9BQ25DMkMsRUFBSUgsYUFBYSxNQUFPUCxFQUFXLGNBQ25DVSxFQUFJSCxhQUFhLE1BQU9KLEdBRXhCRCxFQUFRaEMsT0FBT3dDLEdBRWZaLEVBQUc1QixPQUFPZ0MsR0FPVixNQUFNRSxFQUFPcEQsU0FBU2UsY0FBYyxNQUNwQ3FDLEVBQUtwQyxVQUFZMkIsRUFBV1MsS0FDNUJOLEVBQUc1QixPQUFPa0MsR0FFVixNQUFNdkMsRUFBZWIsU0FBU2UsY0FBYyxLQUM1Q0YsRUFBYUcsVUFBWTJCLEVBQVc5QixhQUNwQ2lDLEVBQUc1QixPQUFPTCxHQUVWLE1BQU04QyxFQUFVM0QsU0FBU2UsY0FBYyxLQUN2QzRDLEVBQVEzQyxVQUFZMkIsRUFBV2dCLFFBQy9CYixFQUFHNUIsT0FBT3lDLEdBRVYsTUFBTUMsRUFBTzVELFNBQVNlLGNBQWMsS0FNcEMsT0FMQTZDLEVBQUs1QyxVQUFZLGVBQ2pCNEMsRUFBS0wsYUFBYSxhQUFjLHNCQUF3QlosRUFBV1MsTUFDbkVRLEVBQUtDLEtBQU94RCxTQUFTeUQsaUJBQWlCbkIsR0FDdENHLEVBQUc1QixPQUFPMEMsR0FFSGQsSUFNVEQsZ0JBQWtCLEVBQUNsRCxFQUFjYSxLQUFLYixlQUNwQ0EsRUFBWWlCLFFBQVErQixJQUVsQixNQUFNb0IsRUFBUzFELFNBQVMyRCx1QkFBdUJyQixFQUFZbkMsS0FBS1YsS0FDaEV5QixPQUFPQyxLQUFLdEIsTUFBTStELFlBQVlGLEVBQVEsUUFBUyxLQUM3QzFDLE9BQU82QyxTQUFTTCxLQUFPRSxFQUFPSSxNQUVoQzNELEtBQUtULFFBQVFxRSxLQUFLTCIsInNvdXJjZXNDb250ZW50IjpbImxldCByZXN0YXVyYW50cyxcclxuICBuZWlnaGJvcmhvb2RzLFxyXG4gIGN1aXNpbmVzXHJcbnZhciBtYXBcclxudmFyIG1hcmtlcnMgPSBbXVxyXG5cclxuLyoqXHJcbiAqIEZldGNoIG5laWdoYm9yaG9vZHMgYW5kIGN1aXNpbmVzIGFzIHNvb24gYXMgdGhlIHBhZ2UgaXMgbG9hZGVkLlxyXG4gKi9cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIChldmVudCkgPT4ge1xyXG4gIGZldGNoTmVpZ2hib3Job29kcygpO1xyXG4gIGZldGNoQ3Vpc2luZXMoKTtcclxufSk7XHJcblxyXG4vKipcclxuICogRmV0Y2ggYWxsIG5laWdoYm9yaG9vZHMgYW5kIHNldCB0aGVpciBIVE1MLlxyXG4gKi9cclxuZmV0Y2hOZWlnaGJvcmhvb2RzID0gKCkgPT4ge1xyXG4gIERCSGVscGVyLmZldGNoTmVpZ2hib3Job29kcygoZXJyb3IsIG5laWdoYm9yaG9vZHMpID0+IHtcclxuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3JcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZWxmLm5laWdoYm9yaG9vZHMgPSBuZWlnaGJvcmhvb2RzO1xyXG4gICAgICBmaWxsTmVpZ2hib3Job29kc0hUTUwoKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldCBuZWlnaGJvcmhvb2RzIEhUTUwuXHJcbiAqL1xyXG5maWxsTmVpZ2hib3Job29kc0hUTUwgPSAobmVpZ2hib3Job29kcyA9IHNlbGYubmVpZ2hib3Job29kcykgPT4ge1xyXG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpO1xyXG4gIG5laWdoYm9yaG9vZHMuZm9yRWFjaChuZWlnaGJvcmhvb2QgPT4ge1xyXG4gICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcbiAgICBvcHRpb24uaW5uZXJIVE1MID0gbmVpZ2hib3Job29kO1xyXG4gICAgb3B0aW9uLnZhbHVlID0gbmVpZ2hib3Job29kO1xyXG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb24pO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogRmV0Y2ggYWxsIGN1aXNpbmVzIGFuZCBzZXQgdGhlaXIgSFRNTC5cclxuICovXHJcbmZldGNoQ3Vpc2luZXMgPSAoKSA9PiB7XHJcbiAgREJIZWxwZXIuZmV0Y2hDdWlzaW5lcygoZXJyb3IsIGN1aXNpbmVzKSA9PiB7XHJcbiAgICBpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yIVxyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNlbGYuY3Vpc2luZXMgPSBjdWlzaW5lcztcclxuICAgICAgZmlsbEN1aXNpbmVzSFRNTCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogU2V0IGN1aXNpbmVzIEhUTUwuXHJcbiAqL1xyXG5maWxsQ3Vpc2luZXNIVE1MID0gKGN1aXNpbmVzID0gc2VsZi5jdWlzaW5lcykgPT4ge1xyXG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdWlzaW5lcy1zZWxlY3QnKTtcclxuXHJcbiAgY3Vpc2luZXMuZm9yRWFjaChjdWlzaW5lID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgb3B0aW9uLmlubmVySFRNTCA9IGN1aXNpbmU7XHJcbiAgICBvcHRpb24udmFsdWUgPSBjdWlzaW5lO1xyXG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb24pO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSBHb29nbGUgbWFwLCBjYWxsZWQgZnJvbSBIVE1MLlxyXG4gKi9cclxud2luZG93LmluaXRNYXAgPSAoKSA9PiB7XHJcbiAgbGV0IGxvYyA9IHtcclxuICAgIGxhdDogNDAuNzIyMjE2LFxyXG4gICAgbG5nOiAtNzMuOTg3NTAxXHJcbiAgfTtcclxuICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XHJcbiAgICB6b29tOiAxMixcclxuICAgIGNlbnRlcjogbG9jLFxyXG4gICAgc2Nyb2xsd2hlZWw6IGZhbHNlXHJcbiAgfSk7XHJcbiAgdXBkYXRlUmVzdGF1cmFudHMoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSBwYWdlIGFuZCBtYXAgZm9yIGN1cnJlbnQgcmVzdGF1cmFudHMuXHJcbiAqL1xyXG51cGRhdGVSZXN0YXVyYW50cyA9ICgpID0+IHtcclxuICBjb25zdCBjU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1aXNpbmVzLXNlbGVjdCcpO1xyXG4gIGNvbnN0IG5TZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVpZ2hib3Job29kcy1zZWxlY3QnKTtcclxuXHJcbiAgY29uc3QgY0luZGV4ID0gY1NlbGVjdC5zZWxlY3RlZEluZGV4O1xyXG4gIGNvbnN0IG5JbmRleCA9IG5TZWxlY3Quc2VsZWN0ZWRJbmRleDtcclxuXHJcbiAgY29uc3QgY3Vpc2luZSA9IGNTZWxlY3RbY0luZGV4XS52YWx1ZTtcclxuICBjb25zdCBuZWlnaGJvcmhvb2QgPSBuU2VsZWN0W25JbmRleF0udmFsdWU7XHJcblxyXG4gIERCSGVscGVyLmZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZChjdWlzaW5lLCBuZWlnaGJvcmhvb2QsIChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcclxuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3IhXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzZXRSZXN0YXVyYW50cyhyZXN0YXVyYW50cyk7XHJcbiAgICAgIGZpbGxSZXN0YXVyYW50c0hUTUwoKTtcclxuICAgIH1cclxuICB9KVxyXG59XHJcblxyXG4vKipcclxuICogQ2xlYXIgY3VycmVudCByZXN0YXVyYW50cywgdGhlaXIgSFRNTCBhbmQgcmVtb3ZlIHRoZWlyIG1hcCBtYXJrZXJzLlxyXG4gKi9cclxucmVzZXRSZXN0YXVyYW50cyA9IChyZXN0YXVyYW50cykgPT4ge1xyXG4gIC8vIFJlbW92ZSBhbGwgcmVzdGF1cmFudHNcclxuICBzZWxmLnJlc3RhdXJhbnRzID0gW107XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpO1xyXG4gIHVsLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAvLyBSZW1vdmUgYWxsIG1hcCBtYXJrZXJzXHJcbiAgc2VsZi5tYXJrZXJzLmZvckVhY2gobSA9PiBtLnNldE1hcChudWxsKSk7XHJcbiAgc2VsZi5tYXJrZXJzID0gW107XHJcbiAgc2VsZi5yZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGFsbCByZXN0YXVyYW50cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cclxuICovXHJcbmZpbGxSZXN0YXVyYW50c0hUTUwgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpO1xyXG4gIHJlc3RhdXJhbnRzLmZvckVhY2gocmVzdGF1cmFudCA9PiB7XHJcbiAgICB1bC5hcHBlbmQoY3JlYXRlUmVzdGF1cmFudEhUTUwocmVzdGF1cmFudCkpO1xyXG4gIH0pO1xyXG4gIGFkZE1hcmtlcnNUb01hcCgpO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIHJlc3RhdXJhbnQgSFRNTC5cclxuICovXHJcbmNyZWF0ZVJlc3RhdXJhbnRIVE1MID0gKHJlc3RhdXJhbnQpID0+IHtcclxuICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XHJcblxyXG4gIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJztcclxuICBjb25zdCBpbWdfbmFtZSA9IERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcclxuICBcclxuICBjb25zdCBwaWN0dXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncGljdHVyZScpO1xyXG5cclxuICBjb25zdCBhbHRfdGV4dCA9ICdJbWFnZSBvZiAnICsgcmVzdGF1cmFudC5uYW1lICsgJyBSZXN0YXVyYW50JztcclxuXHJcbiAgY29uc3Qgc291cmNlX3dlYnAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTtcclxuICBjb25zdCBzcmNzZXRfd2VicCA9IGltZ19uYW1lICsgJy1zbWFsbC53ZWJwIDF4LCAnICsgaW1nX25hbWUgKyAnLW1lZGl1bS53ZWJwIDJ4JztcclxuICBzb3VyY2Vfd2VicC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnaW1hZ2Uvd2VicCcpO1xyXG4gIHNvdXJjZV93ZWJwLnNldEF0dHJpYnV0ZSgnc3Jjc2V0Jywgc3Jjc2V0X3dlYnApO1xyXG4gIHNvdXJjZV93ZWJwLnNldEF0dHJpYnV0ZSgnYWx0JywgYWx0X3RleHQpO1xyXG5cclxuICBwaWN0dXJlLmFwcGVuZChzb3VyY2Vfd2VicCk7XHJcblxyXG4gIGNvbnN0IHNvdXJjZV9qcGVnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJyk7XHJcbiAgY29uc3Qgc3Jjc2V0X2pwZWcgPSBpbWdfbmFtZSArICctc21hbGwuanBnIDF4LCAnICsgaW1nX25hbWUgKyAnLW1lZGl1bS5qcGcgMngnO1xyXG4gIHNvdXJjZV9qcGVnLnNldEF0dHJpYnV0ZSgndHlwZScsICdpbWFnZS9qcGVnJyk7XHJcbiAgc291cmNlX2pwZWcuc2V0QXR0cmlidXRlKCdzcmNzZXQnLCBzcmNzZXRfanBlZyk7XHJcbiAgc291cmNlX2pwZWcuc2V0QXR0cmlidXRlKCdhbHQnLCBhbHRfdGV4dCk7XHJcblxyXG4gIHBpY3R1cmUuYXBwZW5kKHNvdXJjZV9qcGVnKTtcclxuXHJcbiAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgaW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgaW1nX25hbWUgKyAnLXNtYWxsLmpwZycpO1xyXG4gIGltZy5zZXRBdHRyaWJ1dGUoJ2FsdCcsIGFsdF90ZXh0KTtcclxuXHJcbiAgcGljdHVyZS5hcHBlbmQoaW1nKTtcclxuXHJcbiAgbGkuYXBwZW5kKHBpY3R1cmUpO1xyXG4gIC8vIGltYWdlLnNyYyA9IGltZ19uYW1lLnNwbGl0KCcuJylbMF0gKyBcIi1zbWFsbC5cIiArICdqcGcnO1xyXG5cclxuICAvLyBpbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyY3NldCcsIGltZ19uYW1lLnNwbGl0KCcuJylbMF0gKyBcIi1tZWRpdW0uXCIgKyBpbWdfbmFtZS5zcGxpdCgnLicpWzFdICsgJyAyeCcpO1xyXG4gIC8vIGltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgJ0ltYWdlIG9mICcgKyByZXN0YXVyYW50Lm5hbWUgKyBcIiBSZXN0YXVyYW50XCIpO1xyXG4gIC8vIGxpLmFwcGVuZChpbWFnZSk7XHJcblxyXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xyXG4gIG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xyXG4gIGxpLmFwcGVuZChuYW1lKTtcclxuXHJcbiAgY29uc3QgbmVpZ2hib3Job29kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gIG5laWdoYm9yaG9vZC5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5laWdoYm9yaG9vZDtcclxuICBsaS5hcHBlbmQobmVpZ2hib3Job29kKTtcclxuXHJcbiAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuICBhZGRyZXNzLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuYWRkcmVzcztcclxuICBsaS5hcHBlbmQoYWRkcmVzcyk7XHJcblxyXG4gIGNvbnN0IG1vcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgbW9yZS5pbm5lckhUTUwgPSAnVmlldyBEZXRhaWxzJztcclxuICBtb3JlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsICdWaWV3IERldGFpbHMgYWJvdXQgJyArIHJlc3RhdXJhbnQubmFtZSk7XHJcbiAgbW9yZS5ocmVmID0gREJIZWxwZXIudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcclxuICBsaS5hcHBlbmQobW9yZSlcclxuXHJcbiAgcmV0dXJuIGxpXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGQgbWFya2VycyBmb3IgY3VycmVudCByZXN0YXVyYW50cyB0byB0aGUgbWFwLlxyXG4gKi9cclxuYWRkTWFya2Vyc1RvTWFwID0gKHJlc3RhdXJhbnRzID0gc2VsZi5yZXN0YXVyYW50cykgPT4ge1xyXG4gIHJlc3RhdXJhbnRzLmZvckVhY2gocmVzdGF1cmFudCA9PiB7XHJcbiAgICAvLyBBZGQgbWFya2VyIHRvIHRoZSBtYXBcclxuICAgIGNvbnN0IG1hcmtlciA9IERCSGVscGVyLm1hcE1hcmtlckZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgc2VsZi5tYXApO1xyXG4gICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCAnY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbWFya2VyLnVybFxyXG4gICAgfSk7XHJcbiAgICBzZWxmLm1hcmtlcnMucHVzaChtYXJrZXIpO1xyXG4gIH0pO1xyXG59XHJcbiJdLCJmaWxlIjoibWFpbi1taW4uanMifQ==
